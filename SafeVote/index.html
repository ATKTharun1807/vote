<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VOTE CHAIN - Secure Student Elections</title>
    <meta name="description"
        content="Secure, transparent, and decentralized student elections powered by blockchain technology.">

    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="VOTE CHAIN - Secure Blockchain Elections">
    <meta property="og:description"
        content="Cast your vote with absolute confidence. Transparent, tamper-proof, and decentralized student elections.">
    <meta property="og:image"
        content="https://www.shutterstock.com/image-vector/vote-hand-india-election-260nw-1338684383.jpg">
    <meta property="og:url" content="">

    <link rel="icon" href="voting.jpg">

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@0.419.0/dist/umd/lucide.min.js" crossorigin="anonymous"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <!-- PDF Generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"
        crossorigin="anonymous"></script>

    <!-- Flatpickr -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr@4.6.13/dist/flatpickr.min.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/jpg" href="voting.jpg">

    <script>
        // Immediate Theme Application (Prevents White Flash)
        (function () {
            const savedTheme = localStorage.getItem('safevote-theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);

            const savedRole = localStorage.getItem('safevote-role');
            if (savedRole) {
                document.documentElement.setAttribute('data-role', savedRole);
            }
        })();

        // Safe Proxy for early clicks before app.js (module) loads
        window.app = new Proxy({}, {
            get: (target, prop) => {
                return (...args) => {
                    console.log(`[SafeVote] Early call to app.${prop} - Waiting for initialization...`);
                    // If it's a theme call, we can handle it immediately
                    if (prop === 'setTheme') {
                        document.documentElement.setAttribute('data-theme', args[0]);
                        localStorage.setItem('safevote-theme', args[0]);
                    }
                    // The real app.js will replace window.app once loaded
                };
            }
        });
    </script>
</head>

<body>

    <nav class="navbar">
        <div class="container flex-between">
            <a href="#" onclick="window.app.showHome(); return false;"
                style="text-decoration:none; display:flex; align-items:center; gap:0.5rem; color:var(--primary); font-weight:900; font-size:1.5rem;">
                <div
                    style="background:var(--card-bg); width:40px; height:40px; border-radius:50%; display:flex; align-items:center; justify-content:center; overflow:hidden; border:1px solid var(--card-border);">
                    <img src="https://www.shutterstock.com/image-vector/vote-hand-india-election-260nw-1338684383.jpg"
                        alt="SafeVote" style="width:100%; height:100%; object-fit:cover;">
                </div>
                <span>VOTE CHAIN</span>
            </a>

            <div id="home-nav" class="mobile-hidden" style="display:flex; gap:1.5rem; align-items:center;">
                <div id="sync-badge" class="hidden"
                    style="display:flex; align-items:center; gap:0.4rem; background:rgba(37,99,235,0.05); color:#2563eb; padding:0.25rem 0.6rem; border-radius:99px; font-size:0.65rem; font-weight:800; border:1px solid rgba(37,99,235,0.1);">
                    <i data-lucide="refresh-cw"
                        style="width:12px; height:12px; animation: spin 2s linear infinite;"></i>
                    LIVE VOTE
                </div>
                <button onclick="window.app.showHome(); window.app.toggleMobileMenu(false);"
                    style="background:none; border:none; font-weight:700; color:var(--text-muted); cursor:pointer;">HOME</button>
                <button onclick="window.app.scrollToSection('about-section');"
                    style="background:none; border:none; font-weight:700; color:var(--text-muted); cursor:pointer;">ABOUT</button>
                <button onclick="window.app.scrollToSection('features-section');"
                    style="background:none; border:none; font-weight:700; color:var(--text-muted); cursor:pointer;">FEATURES</button>
            </div>

            <div class="flex-between" style="gap:1rem;">
                <div class="theme-switcher-premium">
                    <button onclick="window.app.setTheme('light')" title="Light Mode" class="theme-btn"
                        data-mode="light">
                        <i data-lucide="sun" size="16"></i>
                    </button>
                    <button onclick="window.app.setTheme('dark')" title="Dark Mode" class="theme-btn" data-mode="dark">
                        <i data-lucide="moon-star" size="16"></i>
                    </button>
                    <button onclick="window.app.setTheme('eye-protection')" title="Eye Protection" class="theme-btn"
                        data-mode="eye-protection">
                        <i data-lucide="glasses" size="16"></i>
                    </button>
                </div>

                <button class="mobile-toggle" onclick="window.app.toggleMobileMenu()">
                    <i data-lucide="menu"></i>
                </button>

                <div id="auth-section" class="hidden flex-between" style="gap:1.5rem;">
                    <div style="text-align:right">
                        <div id="nav-username" style="font-weight:800; font-size:0.9rem;">User Name</div>
                        <div id="nav-role" style="font-size:0.7rem; color:var(--text-muted); text-transform:uppercase;">
                            ID: 123456</div>
                    </div>
                    <button onclick="window.app.logout()"
                        style="background:rgba(239, 68, 68, 0.1); border:1px solid rgba(239, 68, 68, 0.2); color:#ef4444; padding:0.5rem 1rem; border-radius:0.75rem; font-weight:700; cursor:pointer;">EXIT</button>
                </div>
            </div>
        </div>
    </nav>

    <main class="container">

        <!-- HOME VIEW -->
        <div id="home-view" class="fade-in hidden">
            <header class="hero-section">
                <div class="hero-badge"><i data-lucide="shield-check" size="14"></i> Encrypted & Secure</div>
                <h1 id="election-title-display" class="hero-title">Student Council Election</h1>
                <p class="hero-desc">The next generation of student elections. Built on blockchain principles to ensure
                    your choice is permanent, private, and powerful.</p>
                <div class="btn-group">
                    <button onclick="window.app.showView('student-login')" class="btn-primary-custom"
                        style="padding:1.5rem 3rem; display:flex; align-items:center; gap:0.75rem;">
                        <i data-lucide="user" size="24"></i> STUDENT LOGIN
                    </button>
                    <button id="admin-portal-btn" onclick="window.app.showView('admin-login')"
                        class="btn-primary-custom"
                        style="padding:1.5rem 3rem; background:var(--card-bg); color:var(--text-main); border:2px solid var(--card-border); display:flex; align-items:center; gap:0.75rem;">
                        <i data-lucide="shield-check" size="24"></i> ADMIN PORTAL
                    </button>
                </div>
            </header>

            <!-- About Section -->
            <section id="about-section" style="padding:4rem 0; border-top:1px solid #e2e8f0;">
                <div style="text-align:center; margin-bottom:4rem;">
                    <h2 style="font-size:2.5rem; font-weight:900;">How it Works</h2>
                    <p style="color:var(--text-muted)">The most transparent election system ever built.</p>
                </div>
                <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap:2rem;">
                    <div class="card-custom" style="text-align:center">
                        <div
                            style="background:rgba(14, 165, 233, 0.1); color:var(--accent); width:60px; height:60px; border-radius:50%; display:flex; align-items:center; justify-content:center; margin:0 auto 1.5rem;">
                            <i data-lucide="zap" size="30"></i>
                        </div>
                        <h3>Instant Counting</h3>
                        <p style="color:var(--text-muted)">Votes are processed in real-time. No manual errors, no
                            delays.</p>
                    </div>
                    <div class="card-custom" style="text-align:center">
                        <div
                            style="background:rgba(37, 99, 235, 0.1); color:var(--primary); width:60px; height:60px; border-radius:50%; display:flex; align-items:center; justify-content:center; margin:0 auto 1.5rem;">
                            <i data-lucide="lock" size="30"></i>
                        </div>
                        <h3>Encrypted Identity</h3>
                        <p style="color:var(--text-muted)">Your personal ID is never linked directly to your choice in
                            the ledger.</p>
                    </div>
                    <div class="card-custom" style="text-align:center">
                        <div
                            style="background:rgba(52, 211, 153, 0.1); color:#10b981; width:60px; height:60px; border-radius:50%; display:flex; align-items:center; justify-content:center; margin:0 auto 1.5rem;">
                            <i data-lucide="layers" size="30"></i>
                        </div>
                        <h3>Blockchain Ledger</h3>
                        <p style="color:var(--text-muted)">Every vote creates an immutable block. Results can't be
                            tampered with.</p>
                    </div>
                </div>
            </section>

            <!-- Features Section - SEPARATE BOXES -->
            <section id="features-section" style="padding:4rem 0; border-top:1px solid #e2e8f0; margin-bottom:4rem;">
                <div style="text-align:center; margin-bottom:1rem;">
                    <h2 style="font-size:2.5rem; font-weight:900;">System Features</h2>
                    <p style="color:var(--text-muted)">Everything you need for a fair election.</p>
                </div>
                <div class="feature-grid">
                    <div class="feature-box">
                        <div class="feature-icon"><i data-lucide="cloud"></i></div>
                        <div class="feature-title">Cloud Sync</div>
                        <p class="feature-desc">All data is synced across nodes instantly for 100% availability.</p>
                    </div>
                    <div class="feature-box">
                        <div class="feature-icon"><i data-lucide="file-text"></i></div>
                        <div class="feature-title">PDF Export</div>
                        <p class="feature-desc">Generate detailed election reports and candidate summaries with one
                            click.</p>
                    </div>
                    <div class="feature-box">
                        <div class="feature-icon"><i data-lucide="search"></i></div>
                        <div class="feature-title">Live Search</div>
                        <p class="feature-desc">Instantly filter through dozens of candidates to find your preferred
                            choice.</p>
                    </div>
                    <div class="feature-box">
                        <div class="feature-icon"><i data-lucide="key"></i></div>
                        <div class="feature-title">Admin Portal</div>
                        <p class="feature-desc">Secure dashboard for managing candidates, checking turnout, and
                            controlling status.</p>
                    </div>
                </div>
            </section>
        </div>

        <!-- STUDENT LOGIN -->
        <div id="student-login-view" class="hidden fade-in">
            <div class="auth-container">
                <div class="card-custom" style="text-align:center; position:relative;">
                    <button onclick="window.app.showHome()"
                        style="position:absolute; top:20px; left:20px; background:none; border:none; color:var(--text-muted); cursor:pointer; font-weight:700;"><i
                            data-lucide="move-left"></i> BACK</button>
                    <div class="login-img-container">
                        <i data-lucide="user-circle" size="60" style="color:var(--primary)"></i>
                    </div>
                    <h2 style="font-size:2rem; font-weight:900; margin-bottom:0.5rem">Student Access</h2>
                    <p style="color:var(--text-muted); margin-bottom:2rem">Enter your unique student ID to vote.</p>
                    <div class="form-group">
                        <label class="form-label">Student ID Number</label>
                        <input type="text" id="student-reg-input" class="form-input" placeholder="e.g. 714023******"
                            inputmode="numeric" onkeyup="if(event.key==='Enter') window.app.handleStudentLogin()">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <div style="position: relative;">
                            <input type="password" id="student-pass-input" class="form-input" placeholder="••••••••"
                                onkeyup="if(event.key==='Enter') window.app.handleStudentLogin()">
                            <i data-lucide="eye" id="toggle-pass-icon" onclick="window.app.togglePasswordVisibility()"
                                style="position: absolute; right: 1rem; top: 50%; transform: translateY(-50%); cursor: pointer; color: #64748b; width: 18px; height: 18px;"></i>
                        </div>
                    </div>
                    <button onclick="window.app.handleStudentLogin()" class="btn-primary-custom"
                        style="width:100%; padding:1.25rem;">Verify & Enter Portal</button>
                </div>
            </div>
        </div>

        <!-- ADMIN LOGIN -->
        <div id="admin-login-view" class="hidden fade-in">
            <div class="admin-login-grid container">

                <!-- LEFT PANEL: System Metrics -->
                <div class="mobile-hidden fade-in" style="animation-delay: 0.1s;">
                    <div class="card-custom" style="padding: 1.5rem; background: var(--glass);">
                        <h3
                            style="font-size: 0.8rem; font-weight: 800; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i data-lucide="activity" size="14"></i> System Integrity
                            <span class="pulse-dot"
                                style="width: 6px; height: 6px; background: #10b981; border-radius: 50%; display: inline-block;"></span>
                        </h3>
                        <div style="display: grid; gap: 1.25rem;">
                            <div style="border-left: 3px solid #10b981; padding-left: 1rem;">
                                <div style="font-size: 0.7rem; color: var(--text-muted); font-weight: 700;">SERVER
                                    STATUS</div>
                                <div id="server-status-val" style="font-size: 1rem; font-weight: 800; color: #10b981;">
                                    OPERATIONAL</div>
                            </div>
                            <div style="border-left: 3px solid var(--primary); padding-left: 1rem;">
                                <div style="font-size: 0.7rem; color: var(--text-muted); font-weight: 700;">NETWORK
                                    LATENCY</div>
                                <div id="network-latency-val" style="font-size: 1rem; font-weight: 800;">24ms (Optimal)
                                </div>
                            </div>
                            <div style="border-left: 3px solid #6366f1; padding-left: 1rem;">
                                <div style="font-size: 0.7rem; color: var(--text-muted); font-weight: 700;">ACTIVE NODES
                                </div>
                                <div id="active-nodes-val" style="font-size: 1rem; font-weight: 800;">12 Connected</div>
                            </div>
                            <div style="border-left: 3px solid #f59e0b; padding-left: 1rem;">
                                <div style="font-size: 0.7rem; color: var(--text-muted); font-weight: 700;">DB UPTIME
                                </div>
                                <div id="db-uptime-val" style="font-size: 1rem; font-weight: 800;">99.9% Reliable</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- CENTER PANEL: The Login Form -->
                <div class="auth-container" style="max-width: 450px; margin: 0;">
                    <div class="card-custom" style="text-align:center; position:relative; margin-bottom: 2rem;">
                        <button onclick="window.app.showHome()"
                            style="position:absolute; top:20px; left:20px; background:none; border:none; color:var(--text-muted); cursor:pointer; font-weight:700;"><i
                                data-lucide="move-left"></i> BACK</button>
                        <div class="login-img-container">
                            <i data-lucide="shield-check" size="60" style="color:var(--text-main)"></i>
                        </div>
                        <h2 style="font-size:2rem; font-weight:900; margin-bottom:0.5rem">Admin Portal</h2>
                        <p style="color:var(--text-muted); margin-bottom:2rem">Restricted access for election
                            coordinators
                            only.</p>
                        <div class="form-group">
                            <label class="form-label">Security Access Key</label>
                            <div style="position: relative;">
                                <input type="password" id="admin-key-input" class="form-input" placeholder="••••••••"
                                    onkeyup="if(event.key==='Enter') window.app.handleAdminLogin()">
                                <i data-lucide="eye" id="admin-key-icon"
                                    onclick="window.app.togglePasswordVisibility('admin-key-input', 'admin-key-icon')"
                                    style="position: absolute; right: 1rem; top: 50%; transform: translateY(-50%); cursor: pointer; color: #64748b; width: 18px; height: 18px;"></i>
                            </div>
                        </div>
                        <button onclick="window.app.handleAdminLogin()" class="btn-primary-custom"
                            style="width:100%; padding:1.25rem; background:#1e293b;">Login as Administrator</button>
                    </div>

                    <!-- Security Protocol Info -->
                    <div class="card-custom"
                        style="padding: 1.5rem; background: rgba(30, 41, 59, 0.03); border-style: dashed;">
                        <h3
                            style="font-size: 0.9rem; font-weight: 800; margin-bottom: 1rem; text-align: center; color: var(--text-muted);">
                            <i data-lucide="lock" size="14" style="vertical-align: middle; margin-right: 0.25rem;"></i>
                            ADMIN SECURITY PROTOCOL
                        </h3>
                        <div style="display: grid; gap: 1rem; font-size: 0.8rem;">
                            <div style="display: flex; gap: 0.75rem; align-items: flex-start;">
                                <div
                                    style="background: var(--primary-light); padding: 0.4rem; border-radius: 8px; color: var(--primary);">
                                    <i data-lucide="fingerprint" size="16"></i>
                                </div>
                                <div>
                                    <div style="font-weight: 700; color: var(--text-main);">Session Tracking</div>
                                    <div style="color: var(--text-muted);">Your IP and session activity are logged for
                                        security auditing.</div>
                                </div>
                            </div>
                            <div style="display: flex; gap: 0.75rem; align-items: flex-start;">
                                <div
                                    style="background: rgba(16, 185, 129, 0.1); padding: 0.4rem; border-radius: 8px; color: #10b981;">
                                    <i data-lucide="shield-check" size="16"></i>
                                </div>
                                <div>
                                    <div style="font-weight: 700; color: var(--text-main);">Encrypted Access</div>
                                    <div style="color: var(--text-muted);">All administrative actions are encrypted
                                        using AES-256 standards.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- RIGHT PANEL: Admin Guidelines -->
                <div class="mobile-hidden fade-in" style="animation-delay: 0.2s;">
                    <div class="card-custom" style="padding: 1.5rem; background: var(--glass);">
                        <h3
                            style="font-size: 0.8rem; font-weight: 800; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i data-lucide="file-text" size="14"></i> Guidelines
                        </h3>
                        <div style="display: grid; gap: 1rem;">
                            <div style="background: rgba(37, 99, 235, 0.05); padding: 1rem; border-radius: 1rem;">
                                <div style="font-weight: 800; font-size: 0.75rem; margin-bottom: 0.25rem;">
                                    CONFIDENTIALITY</div>
                                <p style="font-size: 0.75rem; margin: 0;">Never share your security key with
                                    unauthorized personnel.</p>
                            </div>
                            <div style="background: rgba(37, 99, 235, 0.05); padding: 1rem; border-radius: 1rem;">
                                <div style="font-weight: 800; font-size: 0.75rem; margin-bottom: 0.25rem;">ELECTION
                                    STATUS</div>
                                <p style="font-size: 0.75rem; margin: 0;">Closing an election is permanent and
                                    irreversible.</p>
                            </div>
                            <div style="background: rgba(37, 99, 235, 0.05); padding: 1rem; border-radius: 1rem;">
                                <div style="font-weight: 800; font-size: 0.75rem; margin-bottom: 0.25rem;">SUPPORT</div>
                                <p style="font-size: 0.75rem; margin: 0;">Contact the IT helpdesk for technical issues
                                    during the live window.</p>
                            </div>
                        </div>
                        <div style="margin-top: 1.5rem; text-align: center;">
                            <div style="font-size: 0.65rem; color: var(--text-muted); font-weight: 700;">SAFEVOTE v4.0.2
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <!-- DASHBOARD VIEW -->
        <div id="dashboard-view" class="hidden fade-in">
            <div style="margin:2rem 0; display:flex; justify-content:center;">
                <nav class="dashboard-nav">
                    <button id="tab-vote" onclick="window.app.switchTab('vote')" class="nav-tab active"
                        style="display:flex; align-items:center; gap:0.5rem;">
                        <i data-lucide="vote" size="16"></i> Vote Now
                    </button>
                    <button id="tab-guide" onclick="window.app.switchTab('guide')" class="nav-tab"
                        style="display:flex; align-items:center; gap:0.5rem;">
                        <i data-lucide="info" size="16"></i> Election Guide
                    </button>
                    <button id="tab-admin" onclick="window.app.switchTab('admin')" class="nav-tab hidden"
                        style="display:flex; align-items:center; gap:0.5rem;">
                        <i data-lucide="layout-dashboard" size="16"></i> Control Portal
                    </button>
                    <button id="tab-results" onclick="window.app.switchTab('results')" class="nav-tab hidden"
                        style="display:flex; align-items:center; gap:0.5rem;">
                        <i data-lucide="pie-chart" size="16"></i> Live Results
                    </button>
                    <button id="tab-students" onclick="window.app.switchTab('students')" class="nav-tab hidden"
                        style="display:flex; align-items:center; gap:0.5rem;">
                        <i data-lucide="users" size="16"></i> DEPARTMENT
                    </button>
                    <button id="tab-blockchain" onclick="window.app.switchTab('blockchain')" class="nav-tab"
                        style="display:flex; align-items:center; gap:0.5rem;">
                        <i data-lucide="link" size="16"></i> Digital Ledger
                    </button>
                </nav>
            </div>
            <div id="content-area" class="fade-in"></div>
        </div>

    </main>

    <div id="toast" class="hidden">
        <div class="toast-icon"><i data-lucide="info" size="20"></i></div>
        <span id="toast-message" style="font-weight:700; font-size:0.9rem;">Success message</span>
    </div>

    <!-- MODAL SYSTEM -->
    <div id="modal-overlay" class="modal-overlay hidden">
        <div class="modal-content card-custom">
            <h2 id="modal-title">Reset Password</h2>
            <div id="modal-body"></div>
            <div class="modal-footer" style="display:flex; gap:1rem; margin-top:2rem; justify-content:flex-end;">
                <button id="modal-cancel" class="btn-primary-custom"
                    style="background:none; color:var(--text-muted); box-shadow:none;">Cancel</button>
                <button id="modal-ok" class="btn-primary-custom">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Background Animation -->
    <script src="js/background-animation.js"></script>

    <!-- Main Logic -->
    <script type="module" src="js/app.js"></script>
</body>

</html>